<!-- 
  Scite Plugin (third party)

  Adds a Scite badge next to each citation in the references section.
  See https://scite.ai/.
-->

<link
  rel="stylesheet"
  type="text/css"
  href="https://cdn.scite.ai/badge/scite-badge-latest.min.css"
/>
<script
  async
  type="application/javascript"
  src="https://cdn.scite.ai/badge/scite-badge-latest.min.js"
></script>

<script>
  // start script
  function start() {
    // get citation elements
    const query = ".references div[id*='ref-']";
    const elements = document.querySelectorAll(query);
    for (const element of elements) addBadge(element);

    // attach scroll listener to window
    window.addEventListener("scroll", onScroll);
  }

  // add badge in citation element
  function addBadge(element) {
    // get citation text
    const text = element.innerText;
    // find doi string, eg "DOI: xxxxx/xxxxx"
    const match = text.match(/DOI:\s+(\S*)/) || {};
    const doi = match[1];
    if (!doi) return;
    // create cite badge and put after citation
    const badge = document.createElement("div");
    badge.classList.add("scite-badge");
    badge.setAttribute("data-doi", doi);
    element.append(badge);
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<style>
  .scite-badge {
    text-indent: 0;
  }
</style>
